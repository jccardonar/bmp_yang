



GROW                                                          C. Cardona
Internet-Draft                                                P. Lucente
Intended status: Standards Track                                     NTT
Expires: August 25, 2022                                         T. Graf
                                                                Swisscom
                                                               B. Claise
                                                                  Huawei
                                                       February 21, 2022


                            BMP YANG Module
                       draft-xxx-grow-bmp-yang-00

Abstract

   This document proposes a YANG module for BMP (BGP Monitoring
   Protocol) configuration and monitoring.  A complementary RPC triggers
   the retrieval of the BGP updates to the station.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 25, 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Cardona , et al.         Expires August 25, 2022                [Page 1]

Internet-Draft               BMP YANG Module               February 2022


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Concepts  . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Base ietf-bmp YANG module . . . . . . . . . . . . . . . . . .   4
     4.1.  Tree View . . . . . . . . . . . . . . . . . . . . . . . .   4
     4.2.  YANG Module . . . . . . . . . . . . . . . . . . . . . . .   6
   5.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .  12
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  18
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  19
     7.1.  The IETF XML Registry . . . . . . . . . . . . . . . . . .  19
   8.  Open Issues . . . . . . . . . . . . . . . . . . . . . . . . .  19
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  19
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  19
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  20
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  21
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  21

1.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   The term Client and Server are specified in [RFC8342].

   The terms peers, stations, etc. come from ...

2.  Introduction

   TO BE CHANGED.  I KEPT A STRUCTURE FROM AN OLD DRAFT, WITH SOME
   EXAMPLES.

   This document specifies a way to learn from the devices how granular
   its telemetry and data can be to provide the best post-processing
   analytics.  In the end, the service assurance architecture
   [I-D.claise-opsawg-service-assurance-architecture], it's not
   sufficient to simply stream (or poll) telemetry data, it is equally
   important to be able to act on the data.  As such, a series of extra
   information about the node capabilities is essential.

   blabla



Cardona , et al.         Expires August 25, 2022                [Page 2]

Internet-Draft               BMP YANG Module               February 2022


   The module ietf-notification-capabilities
   [I-D.ietf-netconf-notification-capabilities] augments ietf-system-
   capabilities to specify capabilities related to "Subscription to YANG
   Datastores" (YANG-Push) [RFC8639].  It provides a starting point by
   specifying some per-node telemetry-related capabilities.  Of
   particular interest are the following node capabilities:

   o  minimum-dampening-period

   o  on-change-supported

   o  periodic-notifications-supported

   o  supported-excluded-change-type

3.  Concepts

   TO BE CHANGED.  I KEPT A STRUCTURE FROM AN OLD DRAFT, WITH SOME
   EXAMPLES.

   Doing networking data collection for the sake of doing collection is
   not useful.  At the time of network automation, displaying nice
   graphs from collected data is not useful: the collected data must be
   acted upon immediately.  Some use cases are: network availability,
   closed loop automation (reconfiguring network based on observed
   network state changes), service assurance
   [I-D.claise-opsawg-service-assurance-architecture], etc.

   Per-node static metadata includes:

   o  minimum-observable-period: This is the minimum observable period
      in nanoseconds for the node-selector.  Streaming or polling more
      frequently then this interval may not fetch useful information as
      the node could be updated only at this frequency internally.  If a
      close loop automation system would stream or poll more frequently,
      it could actually draw the wrong conclusions.  Let's take the
      example of interface counters than are updated more frequently
      than 30 seconds in a distributed system.  Streaming interface
      counters every 30 seconds would see an natural increase in the
      interface counters.  However, streaming those interface counters
      every 10 seconds could lead to the wrong conclusion that no
      packets are received/sent on that specific interface ...
      triggering an automatic interface troubleshooting action.  Hence
      determining the minimum-observable-period for every monitored leaf
      is essential for closed loop automation and assurance systems.

   o  suggested-observable-period: The suggested observable period for
      this node-selector.  This value represents factory default



Cardona , et al.         Expires August 25, 2022                [Page 3]

Internet-Draft               BMP YANG Module               February 2022


      suggested information, only available at implementation time.  Let
      us assume that an assurance system would like to monitor all FIB
      entries in the router.  The router would advertise that the
      suggested observable period is, let's say, 30 seconds.  Those 5
      seconds are the factory defaults, provided at the implementation
      time.  Once the router is in production, the observable period
      would obviously change depending on the environment (as an
      example, a FIB containing all BGP entries is huge): this dynamic
      suggest observable period is called the computed-observable-period
      and is available part of the get-measurement-metadata RPC.

   Per-node dynamic metadata includes, part of the get-measurement-
   metadata RPC:

   o  optimized-measurement-point: The node-selector is searched up the
      data tree chain to find the parent node that is the optimized
      measurement point (if the optimized-measurement-point-feature is
      supported).  If the node-selector itself is the optimized point
      then same data node is returned in the output.  If the node-
      selector has no optimized measurement point then this optimized-
      measurement-point leaf is not returned.

   o  computed-observable-period: the computed observable period for
      this node-selector (and optimized-measurement-point).  The system
      internally dynamically computes the suggested observable period
      (relevant for polling or streaming cadence) which can be greater-
      or-equal to the minimal-observable-period.  Since this value is
      dynamic, this metadata is only available in a run time
      environment.

   o  active-measurements - subscribed-measurement-period: List of
      existing subscriptions for this node-selector.  If there are no
      active subscriptions then system calculate the measurement-period
      and this list is not-returned, else, each instance in this list
      will be pair of active measurement with intended and actual period
      used by the system.

4.  Base ietf-bmp YANG module

4.1.  Tree View

   The following tree diagram [RFC8340] provides an overview of the
   ietf-system-node-metadata data model.

module: ietf-bmp
  +--rw bmp
     +--rw stations
     |  +--rw station* [id]



Cardona , et al.         Expires August 25, 2022                [Page 4]

Internet-Draft               BMP YANG Module               February 2022


     |     +--rw id               string
     |     +--rw connection
     |     |  +--rw local-address?      inet:ip-address
     |     |  +--rw destination-port?   inet:ip-address
     |     +--rw bmp_session
     |     |  +--rw initiation-message?    string
     |     |  +--rw statistics-interval?   uint32
     |     +--rw bmp_sources
     |     |  +--rw adj-rib-in-pre
     |     |  |  +--rw enabled?            boolean
     |     |  |  +--rw address-families
     |     |  |     +--rw address-family* [name]
     |     |  |        +--rw name     -> /rt:routing/control-plane-protocols/control-plane-protocol/bgp:bgp/global/afi-safis/afi-safi/name
     |     |  |        +--rw peers
     |     |  |           +--rw peer* [peer-identification]
     |     |  |              +--rw peer-identification    union
     |     |  +--rw adj-rib-in-post
     |     |  |  +--rw enabled?            boolean
     |     |  |  +--rw address-families
     |     |  |     +--rw address-family* [name]
     |     |  |        +--rw name     -> /rt:routing/control-plane-protocols/control-plane-protocol/bgp:bgp/global/afi-safis/afi-safi/name
     |     |  |        +--rw peers
     |     |  |           +--rw peer* [peer-identification]
     |     |  |              +--rw peer-identification    union
     |     |  +--rw local-rib
     |     |  |  +--rw enabled?            boolean
     |     |  |  +--rw address-families*   identityref
     |     |  +--rw adj-rib-out-pre
     |     |  |  +--rw enabled?            boolean
     |     |  |  +--rw address-families
     |     |  |     +--rw address-family* [name]
     |     |  |        +--rw name     -> /rt:routing/control-plane-protocols/control-plane-protocol/bgp:bgp/global/afi-safis/afi-safi/name
     |     |  |        +--rw peers
     |     |  |           +--rw peer* [peer-identification]
     |     |  |              +--rw peer-identification    union
     |     |  +--rw adj-rib-out-post
     |     |     +--rw enabled?            boolean
     |     |     +--rw address-families
     |     |        +--rw address-family* [name]
     |     |           +--rw name     -> /rt:routing/control-plane-protocols/control-plane-protocol/bgp:bgp/global/afi-safis/afi-safi/name
     |     |           +--rw peers
     |     |              +--rw peer* [peer-identification]
     |     |                 +--rw peer-identification    union
     |     +--rw session-stats
     |        +--ro established-session?               boolean
     |        +--ro total-route-monitoring-messages?   uint32
     |        +--ro total-statistics-messages?         uint32
     |        +--ro total-peer-down-messages?          uint32



Cardona , et al.         Expires August 25, 2022                [Page 5]

Internet-Draft               BMP YANG Module               February 2022


     |        +--ro total-peer-up-messages?            uint32
     |        +--ro total-initiation-messages?         uint32
     |        +--ro total-route-mirroring-messages?    uint32
     +--rw actions
        +---x reset-station
           +---w input
           |  +---w station?   -> /bmp/stations/station/id
           +--ro output
              +--ro (outcome)?
                 +--:(success)
                 |  +--ro success?   empty
                 +--:(failure)
                    +--ro failure?   string


4.2.  YANG Module

   <CODE BEGINS> file "ietf-bmp@2022-01-27.yang"

module ietf-bmp {
    yang-version 1.1;
    namespace "urn:ietf:params:xml:ns:yang:ietf-bmp";

    prefix ietf-bmp;

    import ietf-inet-types {
      prefix "inet";
      reference
        "RFC 6991: Common YANG Data Types";
    }

    import ietf-routing {
       prefix rt;
       reference
         "RFC 8349, A YANG Data Model for Routing Management
          (NMDA Version).";
     }

    import ietf-bgp-types {
       prefix bt;
       reference
         "RFC XXXX, BGP YANG Model for Service Provider Network.";
     }

    import ietf-bgp {
       prefix bgp;
       reference
         "RFC XXXX: BGP YANG module for Service Provider Network.";



Cardona , et al.         Expires August 25, 2022                [Page 6]

Internet-Draft               BMP YANG Module               February 2022


     }

    organization "IETF GROW Working Group";
    contact
       "WG Web:   <https://datatracker.ietf.org/wg/grow/>
        WG List:  <mailto:grow@ietf.org>

        Author:  Camilo Cardona
           <mailto:camilo@ntt.net>

        Author:  Paolo Lucente
           <mailto:cpaolo@ntt.net>

        Author:  Thomas Graf
           <mailto:thomas.graf@swisscom.com>

        Author:  Benoit Claise
           <mailto:benoit.claise@huawei.com>";

    description "This module specifies a structure for BMP (BGP Monitoring
        Protocol) configuration and monitoring.

        The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL',
        'SHALL NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED',
        'NOT RECOMMENDED', 'MAY', and 'OPTIONAL' in this document
        are to be interpreted as described in BCP 14 (RFC 2119)
        (RFC 8174) when, and only when, they appear in all
        capitals, as shown here.

        Copyright (c) 2022 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Revised BSD License set
        forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).

        This version of this YANG module is part of RFC 9196
        (https://www.rfc-editor.org/info/rfc9196); see the RFC itself
        for full legal notices.";

    revision 2022-01-27 {
      description
      "initial version";
      reference
         "[RFC-to-be]: BMP YANG Module";



Cardona , et al.         Expires August 25, 2022                [Page 7]

Internet-Draft               BMP YANG Module               February 2022


    }

    typedef bmp_peer_types {
      type enumeration {
        enum all_peers { value 10; }
      }
    }

    grouping bmp_ip_connection {

      leaf local-address {
        type inet:ip-address;
        description
         "Local IP address to source connections";
      }

      leaf destination-port {
        type inet:ip-address;
        description
         "Destination port for connections";
      }
    }

    grouping bmp_peer_ribs_filter {
      leaf enabled {
           type boolean;
           description "Enables the specified RIB";
      }

      container address-families {
        list address-family {
          key "name";

          leaf name {
            type leafref {
             path "/rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/bgp:bgp/bgp:global/bgp:afi-safis/bgp:afi-safi/bgp:name";
            }
            description "Name of the address family";
          }

          container peers {
            list peer {
              key "peer-identification";

              leaf peer-identification{
                type union {
                  type leafref {
                   path "/rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/bgp:bgp/bgp:neighbors/bgp:neighbor/bgp:remote-address";



Cardona , et al.         Expires August 25, 2022                [Page 8]

Internet-Draft               BMP YANG Module               February 2022


                  }
                  type bt:peer-type;
                  type bmp_peer_types;
                }
              }
            }
          }
        }
      }
    }

    grouping bmp_route_monitoring_sources {

      container adj-rib-in-pre {
        uses bmp_peer_ribs_filter;
      }

      container adj-rib-in-post {
        uses bmp_peer_ribs_filter;
      }

      container local-rib {
        leaf enabled {
             type boolean;
             description "Enables the specified RIB";
        }

        leaf-list address-families {
          type identityref {
            base bt:afi-safi-type;
          }
          description "Default list of address families to enable for peers. If
          not present, all will be enabled.";
        }
      }

      container adj-rib-out-pre {
        uses bmp_peer_ribs_filter;
      }

      container adj-rib-out-post {
        uses bmp_peer_ribs_filter;
      }
    }

    grouping bmp_session_options {
      leaf initiation-message {
        type string;



Cardona , et al.         Expires August 25, 2022                [Page 9]

Internet-Draft               BMP YANG Module               February 2022


        description "User defined message to append to the initiation message";
      }

      leaf statistics-interval {
        type uint32;
        description "Default Interval for statistic message.";
      }
    }


    container bmp {

      container stations {
        description
           "Configuration for BMP stations.";

        list station {
          key "id";

          leaf id {
            type string;
            description "Identification string for the station";
          }

          // Connection, missing tcp tuning params like keep-alives, segment sizes, etc.
          container connection {
            uses bmp_ip_connection;
          }

          container bmp_session {
            uses bmp_session_options;

          }

          container bmp_sources {
            uses bmp_route_monitoring_sources;

          }


          container session-stats {
            // stats and operational values
            leaf established-session {
             type boolean;
             config false;
             description "Value indicating if the session is currently established";
            }




Cardona , et al.         Expires August 25, 2022               [Page 10]

Internet-Draft               BMP YANG Module               February 2022


            leaf total-route-monitoring-messages {
             type uint32;
             config false;
             description "Number of route-monitoring messages sent since last sucessful connection";
            }

            leaf total-statistics-messages {
             type uint32;
             config false;
             description "Number of statistics messages sent since last sucessful connection";
            }

            leaf total-peer-down-messages {
             type uint32;
             config false;
             description "Number of peer-down messages sent since last sucessful connection";
            }

            leaf total-peer-up-messages {
             type uint32;
             config false;
             description "Number of peer-up messages sent since last sucessful connection";
            }

            leaf total-initiation-messages {
             type uint32;
             config false;
             description "Number of initiation messages sent since last sucessful connection";
            }

            leaf total-route-mirroring-messages {
             type uint32;
             config false;
             description "Number of route-mirroring messages sent since last sucessful connection";

            }
          }
        }
      }

      container actions {

      action reset-station {
        input {
          leaf station {
            type leafref {
              path "/bmp/stations/station/id";
            }



Cardona , et al.         Expires August 25, 2022               [Page 11]

Internet-Draft               BMP YANG Module               February 2022


          }
        }
        output {
          choice outcome {
            leaf success {
              type empty;
              description "Reset succesful";
            }
           leaf failure {
              type string;
              description
                "Reset could not be performed. Reason is included in the field";
            }
          }
        }
      }
    }
  }
 }


   <CODE ENDS>

5.  Examples

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [RFC6241] or RESTCONF [RFC8040].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [RFC6242].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [RFC8446].

   XML data tree for the ietf-interface YANG module [RFC8343]:

















Cardona , et al.         Expires August 25, 2022               [Page 12]

Internet-Draft               BMP YANG Module               February 2022


     <interfaces xmlns="urn:ietf:params:xml:ns:yang:ietf-interfaces">
       <interface>
         <name/>
         <description/>
         <type/>
         <link-up-down-trap-enable/>
         <admin-status/>
         <oper-status/>
         <last-change/>
         <if-index/>
         <phys-address/>
         <higher-layer-if>
           <!-- # entries: 0.. -->
         </higher-layer-if>
         <lower-layer-if>
           <!-- # entries: 0.. -->
         </lower-layer-if>
         <speed/>
         <statistics>
           <discontinuity-time/>
           <in-octets/>
           <in-unicast-pkts/>
           <in-broadcast-pkts/>
           <in-multicast-pkts/>
           <in-discards/>
           <in-errors/>
           <in-unknown-protos/>
           <out-octets/>
           <out-unicast-pkts/>
           <out-broadcast-pkts/>
           <out-multicast-pkts/>
           <out-discards/>
           <out-errors/>
         </statistics>
       </interface>
     </interfaces>

   Example1: Demonstrating the querying metadata for all system schema
   nodes for the ietf-interfaces [RFC8343].

  <!-- Request -->
 <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">
  <get>
    <filter>
      <system-capabilities xmlns="urn:ietf:params:xml:ns:yang:ietf-system-capabilities">
      </system-capabilities>
    </filter>
  </get>



Cardona , et al.         Expires August 25, 2022               [Page 13]

Internet-Draft               BMP YANG Module               February 2022


</rpc>

  <!-- Response -->
<rpc-reply message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
  <data>
  <system-capabilities xmlns="urn:ietf:params:xml:ns:yang:ietf-system-capabilities" xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores">
    <datastore-capabilities>
      <datastore>ds:operational</datastore>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface</node-selector>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"></corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:admin-status</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.7</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:oper-status</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.8</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:if-index</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.1</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:phys-address</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.6</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:lower-layer-if</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.2.1.2</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:higher-layer-if</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.2.1.1</corresponding-mib-oid>



Cardona , et al.         Expires August 25, 2022               [Page 14]

Internet-Draft               BMP YANG Module               February 2022


        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:speed</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.5</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics</node-selector>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:discontinuity-time</node-selector>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1.1.19</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-octets</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.10</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-unicast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.11</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-multicast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1.1.2</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-broadcast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1.1.3</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>



Cardona , et al.         Expires August 25, 2022               [Page 15]

Internet-Draft               BMP YANG Module               February 2022


        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-discards</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.13</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-errors</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.14</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:in-unknown-protos</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.15</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-octets</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.16</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-unicast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.17</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-multicast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1.1.4</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-broadcast-pkts</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.31.1.1.1.5</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-discards</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.19</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
      <per-node-capabilities>



Cardona , et al.         Expires August 25, 2022               [Page 16]

Internet-Draft               BMP YANG Module               February 2022


        <node-selector>/if:interfaces/if:interface/if:statistics/if:out-errors</node-selector>
        <corresponding-mib-oid xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1.3.6.1.2.1.2.2.1.20</corresponding-mib-oid>
        <minimum-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</minimum-observable-period>
        <suggested-observable-period xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata">1000</suggested-observable-period>
      </per-node-capabilities>
    </datastore-capabilities>
  </system-capabilities>
</data>
</rpc-reply>

   Example2: Demonstrating the querying metadata of all optimized-
   measurement-point(s).  Use containment and selection nodes filtering
   criteria to express which all metadata you want.  In this example:
   get query filter only to "select" the node-instance-identifier,
   optimized-measurement-point nodes, for the ietf-interfaces [RFC8343].
   There are two optimized-measurement-points: interface and statistics.



































Cardona , et al.         Expires August 25, 2022               [Page 17]

Internet-Draft               BMP YANG Module               February 2022


   <!-- Request -->
 <rpc message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
   <get>
     <filter type="subtree">
     <system-capabilities xmlns="urn:ietf:params:xml:ns:yang:ietf-system-capabilities"></system-capabilities>
      <datastore-capabilities>
        <datastore>ds:operational</datastore>
        <per-node-capabilities>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
        </per-node-capabilities>
      </datastore-capabilities>
    </filter>
   </get>
 </rpc>

  <!-- Response -->

<rpc-reply message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
  <data>
  <system-capabilities xmlns="urn:ietf:params:xml:ns:yang:ietf-system-capabilities" xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores">
    <datastore-capabilities>
      <datastore>ds:operational</datastore>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface</node-selector>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
      </per-node-capabilities>
      <per-node-capabilities>
        <node-selector>/if:interfaces/if:interface/if:statistics</node-selector>
        <optimized-measurement-point xmlns="urn:ietf:params:xml:ns:yang:ietf-system-node-metadata"/>
      </per-node-capabilities>
    </datastore-capabilities>
  </system-capabilities>
</data>
</rpc-reply>

6.  Security Considerations

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [RFC6241] or RESTCONF [RFC8040].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [RFC6242].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [RFC8446].

   The Network Configuration Access Control Model (NACM) [RFC8341]
   provides the means to restrict access for particular NETCONF or




Cardona , et al.         Expires August 25, 2022               [Page 18]

Internet-Draft               BMP YANG Module               February 2022


   RESTCONF users to a preconfigured subset of all available NETCONF or
   RESTCONF protocol operations and content.

7.  IANA Considerations

7.1.  The IETF XML Registry

   This document registers two URIs in the IETF XML registry [RFC3688].
   Following the format in [RFC3688], the following registrations are
   requested:

      URI: urn:ietf:params:xml:ns:yang:ietf-system-node-metadata
      Registrant Contact: The NETCONF WG of the IETF.
      XML: N/A, the requested URI is an XML namespace.

8.  Open Issues

      Shall we copy the TCP tuning parameters from the BGP
      specifications?

9.  References

9.1.  Normative References

   [I-D.ietf-netconf-notification-capabilities]
              Lengyel, B., Clemm, A., and B. Claise, "YANG Modules
              Describing Capabilities for Systems and Datastore Update
              Notifications", draft-ietf-netconf-notification-
              capabilities-21 (work in progress), October 2021.

   [I-D.ietf-netmod-rfc6991-bis]
              Schoenwaelder, J., "Common YANG Data Types", draft-ietf-
              netmod-rfc6991-bis-11 (work in progress), February 2022.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7854]  Scudder, J., Ed., Fernando, R., and S. Stuart, "BGP
              Monitoring Protocol (BMP)", RFC 7854,
              DOI 10.17487/RFC7854, June 2016,
              <https://www.rfc-editor.org/info/rfc7854>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.




Cardona , et al.         Expires August 25, 2022               [Page 19]

Internet-Draft               BMP YANG Module               February 2022


   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8639]  Voit, E., Clemm, A., Gonzalez Prieto, A., Nilsen-Nygaard,
              E., and A. Tripathy, "Subscription to YANG Notifications",
              RFC 8639, DOI 10.17487/RFC8639, September 2019,
              <https://www.rfc-editor.org/info/rfc8639>.

9.2.  Informative References

   [I-D.claise-opsawg-service-assurance-architecture]
              Claise, B., Quilbeuf, J., Lopez, D. R., Voyer, D., and T.
              Arumugam, "Service Assurance for Intent-based Networking
              Architecture", draft-claise-opsawg-service-assurance-
              architecture-05 (work in progress), April 2021.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC7223]  Bjorklund, M., "A YANG Data Model for Interface
              Management", RFC 7223, DOI 10.17487/RFC7223, May 2014,
              <https://www.rfc-editor.org/info/rfc7223>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8342]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", RFC 8342, DOI 10.17487/RFC8342, March 2018,
              <https://www.rfc-editor.org/info/rfc8342>.




Cardona , et al.         Expires August 25, 2022               [Page 20]

Internet-Draft               BMP YANG Module               February 2022


   [RFC8343]  Bjorklund, M., "A YANG Data Model for Interface
              Management", RFC 8343, DOI 10.17487/RFC8343, March 2018,
              <https://www.rfc-editor.org/info/rfc8343>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

Acknowledgements

   The authors would like to thank ... for their reviews and feedback.

Authors' Addresses

   Camilo Cardona
   NTT
   164-168, Carrer de Numancia
   Barcelona  08029
   Spain

   Email: camilo@ntt.net


   Paolo Lucente
   NTT
   Siriusdreef 70-72
   Hoofddorp, WT  2132
   Netherlands

   Email: paolo@ntt.net


   Thomas Graf
   Swisscom
   Binzring 17
   Zurich 8045
   Switzerland

   Email: thomas.graf@swisscom.com


   Benoit Claise
   Huawei

   Email: benoit.claise@huawei.com






Cardona , et al.         Expires August 25, 2022               [Page 21]
